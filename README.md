# Idregex

**IP / 域名提取小工具（网页版 & Py 脚本）**

------

## 🔍 HTML

一个轻量级网页工具，适用于从文本中提取 IP、域名及相关信息，支持生成 FOFA、Hunter搜索引擎语法。

![网页界面](./img1.png)

------

### ✅ 实现功能

- 提取文本中出现的 IP、域名、路径、协议等信息
- 快捷构造搜索引擎语法（支持 FOFA、Hunter 等）
- 去重、过滤脏数据、提取主域名
- 可选匹配参数、协议类型、路径等附加信息
- 支持多种协议识别与主域名归类

------

### 📅 更新日志

**2025-06-14**

- 搜索语法构造优化，新增去重与排除域名中提取到的 IP 地址
- 支持路径与主域名的脏数据过滤与处理
- 优化界面展示与交互逻辑

**2024-10-17**

- FOFA、Hunter 语法构造优化，长字符串自动换行
- 增强结果去重能力

**2023-09-25**

- 新增 Ajax 请求解析域名对应站点的 ICP 公司名称信息
- 添加 FOFA、Hunter 搜索语法一键生成功能

**2023-03-30**

- 支持在 IP 提取时匹配路径及参数
- 匹配逻辑增强：支持路径信息的结构化提取

**2023-03-22**

- 新增路径与参数的独立匹配能力
- 增加协议头识别，支持 17 种协议（如 `ftp`, `mailto`, `thunder` 等）
- 支持常见主域名识别，支持 27 个常用二级域名的匹配
- 优化整体匹配逻辑与执行效率

------

## 🐍 Py

用于大批量日志文件中提取 IP 与域名信息，适合与 IOC 样本进行关联分析。

------

### 🚀 功能场景

- 适用于处理海量服务器日志文件，提取网络指标用于溯源、取证与威胁关联分析。

------

### ✅ 实现功能

- 支持多线程并发处理
- 自动分割大于 10MB 的文本文件，提升性能
- 支持灵活筛选：IP、域名、协议、端口等

------

### ⚙️ 使用方式

```bash
python extract.py -f D:\\1.txt -a -p -D -t
```

**结果保存位置：** 当前目录下自动生成 `result.csv`

------

### 📖 命令行参数说明

| 参数                | 描述                                                         |
| ------------------- | ------------------------------------------------------------ |
| `-f, --file`        | 指定待处理的单个文件                                         |
| `-d, --directory`   | 指定目录，批量处理文件                                       |
| `-D, --delete`      | 去重结果                                                     |
| `-i, --only-ip`     | 仅提取 IP 地址                                               |
| `-n, --only-domain` | 仅提取域名                                                   |
| `-a, --all`         | 同时提取 IP 与域名                                           |
| `-t, --protocol`    | 匹配包含协议的内容（如：[http://127.0.0.1）](http://127.0.0.1)/) |
| `-p, --port`        | 匹配包含端口的内容（如：127.0.0.1:8080）                     |
| `-h, --help`        | 显示帮助信息                                                 |

